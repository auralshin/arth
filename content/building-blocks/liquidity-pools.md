### Liquidity Pools

> info **Metadata** Level: All | Prerequisites: Tokens 101, AMMs 101 | Tags: liquidity, amm, trading, lp, inventory, fees

Liquidity pools are shared inventories of assets that stand ready to trade with anyone who interacts with them. Instead of matching buyers and sellers directly, a pool quotes prices according to an automated rule (an AMM invariant) and uses its reserves to fill orders. Liquidity providers (LPs) deposit assets into the pool and receive a claim on a slice of the reserves plus fees generated by trading activity.

At any point in time a pool can be described by its reserve vector (R<sub>t</sub> = (r<sub>1</sub>, r<sub>2</sub>, …, r<sub>n</sub>)), a pricing rule, and a fee structure. Trading activity moves the reserve vector along the surface defined by the AMM's invariant; fees grow the pool over time; LP deposits and withdrawals rescale the reserves and change ownership shares. From a finance perspective, an LP position is a dynamic portfolio whose composition responds mechanically to price movements and trade flows.

---

#### Pool Composition and LP Tokens

When assets are deposited, the protocol records the contribution by minting LP tokens or an internal accounting share. These tokens represent a pro-rata claim on the pool's reserves. If S<sub>t</sub> denotes the total number of LP shares outstanding and a given address holds s<sub>t</sub>, its ownership fraction is s<sub>t</sub> / S<sub>t</sub>, and its underlying exposure is that fraction of each reserve.

The composition of the pool evolves as trades execute. Under a two-asset constant-product AMM, a price increase in one asset causes the pool to hold less of that asset and more of the other. LP shares track this automatically; they are not static "bags" but fractional claims on a moving target. Deposits and withdrawals dilute or concentrate existing LPs by changing S<sub>t</sub>; fee accrual increases the total reserves without requiring additional capital.

This structure makes LP tokens convenient collateral or building blocks in other protocols. However, it also means that the risk profile of an LP token is more complex than that of a simple single-asset position.

---

#### Pricing, Slippage, and Path Dependence

Prices in a liquidity pool are implied by the AMM rule acting on the reserves. For small trades near the current state, the marginal price is determined by local properties (for example, slope of the invariant), while larger trades traverse more of the surface and therefore encounter changing marginal prices. The realised execution price of a swap depends on the entire path taken along this surface.

Because trading moves the reserves, the history of order flow matters. Two pools that start in the same state and experience different sequences of trades can end in different states even if the external market ends at the same price. From an LP's perspective, PnL is therefore path-dependent: fee income, rebalancing effects, and eventual portfolio composition all depend on how prices and trades evolve through time, not just on the start and end points.

Impermanent loss is a specific manifestation of this path dependence, describing the gap between the value of the LP's position and that of a static buy-and-hold basket. The sign and magnitude of this gap depend on volatility, correlation, and how much volume is routed through the pool relative to its depth.

---

#### Fees, Returns, and Capital Efficiency

Pools typically charge a fee on each trade, expressed as a percentage of notional volume. This fee is added to the reserves, increasing the value of LP shares. The realised fee yield depends on trade volume, pool size, and the mix of directions; high volume relative to depth can generate significant fee income, but also usually coincides with greater rebalancing and higher risk.

Capital efficiency refers to how much useful liquidity a pool provides per unit of capital locked. A broad, flat pool that covers a wide price range offers constant availability but spreads capital thinly, leading to substantial slippage for large trades. Mechanisms like concentrated liquidity and stableswap curves increase capital efficiency by focusing liquidity where it is most likely to be needed.

From a research perspective, it is natural to treat fee revenue as a stochastic process driven by order flow and to compare it against measures of risk such as variance of LP returns, drawdowns, and tail losses under different market regimes.

---

#### Risks and Failure Modes

Liquidity pooling exposes participants to several risk channels. Market risk stems from holding a changing mix of assets whose values can diverge sharply. Impermanent loss captures some of this, but not all; extreme moves and regime changes can produce outcomes that deviate substantially from simple models.

Smart-contract risk, oracle risk (for pools using external prices), and governance risk all enter through the protocol itself. MEV and sandwich attacks degrade execution quality for traders and can indirectly harm LPs by concentrating profitable order flow in the hands of third parties. Liquidity fragmentation across many pools and chains can reduce depth and amplify slippage in stressed conditions.

Stress testing LP strategies under shocks to prices, volumes, and fee schedules helps reveal these vulnerabilities. The design of the pool—curve choice, fee tiers, and concentration mechanisms—interacts strongly with these risks.

---

#### See Also

* [AMMs 101](/building-blocks/amms-101) – Core concepts behind automated market makers
* [AMMs In Depth](/protocols/amms-depth) – Detailed discussion of invariant design and pricing behaviour
* [Concentrated Liquidity](/protocols/concentrated-liquidity) – Range-based liquidity for higher capital efficiency
* [Impermanent Loss](/building-blocks/impermanent-loss) – Quantifying the rebalancing effect on LPs
* [Yield Farming](/building-blocks/yield-farming) – Incentive programs layered on top of liquidity provision
